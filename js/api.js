"use strict";(function(a){window.addEventListener("load",function(){var b=a.querySelector(".loading"),c=a.querySelector(".error"),d=c.querySelector(".message"),e=Url.queryString("token"),f=(Url.queryString("user")||location.search).replace(/^\?@?/g,"");if(f){if(e=Url.queryString("token")||void 0,e&&(f=Url.queryString("input"),!f))return c.classList.add("visible"),d.textContent="If you are using a token, please provide the 'input' querystring parameter.";b.classList.add("visible");var g=function(a,b){var c=localStorage[a];try{c=JSON.parse(c)}catch(a){c=null}if(Array.isArray(c))return b(null,c);var d=new GitHubPolyglot(a,e),f=d.userStats;return localStorage[a]?b(null,localStorage[a]):void(d.repo&&(f=d.repoStats),f.call(d,function(c,d){if(c)return b(c);try{localStorage[a]=JSON.stringify(d)}catch(a){localStorage.clear()}b(null,d)}))};g(f,function(e,f){return b.classList.remove("visible"),e?(c.classList.add("visible"),d.textContent=e||"This user doesn't have any repositories."):void(f.sort(function(c,a){return c.value<a.value?1:-1}).forEach(function(a){a.title=a.label,delete a.label}),drawPieChart.call(a.querySelector("#pieChart"),f,{legend:!0}))})}})})(document);