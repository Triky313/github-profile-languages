if("undefined"==typeof require)var require=function(a){return"ul"===a?{merge:function(){for(var a,b,c={},d=[].splice.call(arguments,0);0<d.length;)if(a=d.splice(-1)[0],"[object Object]"==toString.call(a))for(b in a)a.hasOwnProperty(b)&&("[object Object]"==toString.call(a[b])?c[b]=this.merge(a[b],c[b]||{}):void 0!==a[b]&&(c[b]=a[b]));return c}}:"querystring"===a?{stringify:function(a){var b="";return Object.keys(a).forEach(function(d){b+="&"+encodeURIComponent(d)+"="+encodeURIComponent(a[d])}),b.substr(1)}}:null};var Ul=require("ul"),Jsonreq=require("jsonrequest"),QueryString=require("querystring");function GitHub(a){a=a||{},this.host=a.host||"https://api.github.com/",this.token=a.token,this.user_agent=a.user_agent||"gh.js"}GitHub.prototype.req=function(a,b,c){var d=this,e=null,a=d.host+a;return"function"==typeof b&&(c=b,b=void 0),d.token&&(a+=-1<a.indexOf("?")?"&":"?",a+="access_token="+d.token),"function"==typeof Jsonreq?e=Jsonreq({url:a,data:b,headers:{"User-agent":d.user_agent}},function(a,b,e){d.checkResponse(a,b,e,c)}):(e=new XMLHttpRequest,c=c||function(){},e.open("GET",a,!0),e.send(),e.onreadystatechange=function(){4!==e.readyState||d.checkResponse(null,e.responseText,{statusCode:e.status},c)}),e},GitHub.prototype.checkResponse=function(a,b,c,d){return"string"==typeof b&&(b=JSON.parse(b)),a?d(a):200===c.statusCode?d(null,b):b.message?d(b.message):d(null,b)},GitHub.prototype.get=function(a,b,c){var d=this,e=1,f=null,g=null;return("function"==typeof b&&(c=b,b={}),b=Ul.merge(b,{opts:{}}),b.all)?(g=[],b.opts.per_page=100,f=function(){return d.req(a+"?"+QueryString.stringify(Ul.merge({page:e},b.opts)),b.data,function(a,b){return a?c(a):(g=g.concat(b),b&&b.length?void(++e,f()):c(null,g))})},f()):(Object.keys(b.opts).length&&(a+=a+"?"),d.req(a+QueryString.stringify(Ul.merge(b.opts)),b.data,c))},"undefined"==typeof module&&"object"==typeof window?window.GitHub=GitHub:module.exports=GitHub;