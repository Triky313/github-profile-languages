(function(){function a(){for(let a=1;a<arguments.length;a++)for(let b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}function b(a){var b=document.createElement('div');return b.innerHTML=a,b.childNodes[0]}window.drawPieChart=function(c,d){function e(a){var b=this.dataset.order;K.textContent=c[b].title+': '+c[b].value,K.style.opacity=1,'active'!==B[b].getAttribute('data-active')&&(D[b].style.opacity=.8),x.onPieMouseenter.apply(this,[a,c])}function f(a){var b=this.dataset.order;K.style.opacity=0,'active'!==B[b].getAttribute('data-active')&&(D[b].style.opacity=x.lightPiesOpacity),x.onPieMouseleave.apply(this,[a,c])}function h(a){K.style.top=a.pageY+x.tipOffsetY+'px',K.style.left=a.pageX-K.clientWidth/2+x.tipOffsetX+'px'}function j(a){for(var b=this.dataset.order,d=B[b],e=0,f=c.length;e<f;e++)e!==b&&(B[e].setAttribute('data-active',''),D[e].style.opacity=x.lightPiesOpacity);'active'===d.getAttribute('data-active')?(d.setAttribute('data-active',''),D[b].style.opacity=.8):(d.setAttribute('data-active','active'),D[b].style.opacity=1),x.onPieClick.apply(this,[a,c])}function k(a){var b=-w/2,d=1;x.animation&&(d=a),J.setAttribute('opacity',a);for(var e=0,f=c.length;e<f;e++){var g=d*(c[e].value/G*(2*w)),h=b+g,j=(h-b)%(2*w)>w?1:0,k=s+u(b)*F,l=t+v(b)*F,m=s+u(h)*F,n=t+v(h)*F,o=s+u(b)*(F+x.lightPiesOffset),p=t+v(b)*(F+x.lightPiesOffset),q=s+u(h)*(F+x.lightPiesOffset),r=t+v(h)*(F+x.lightPiesOffset),y=['M',o,p,'A',F+x.lightPiesOffset,F+x.lightPiesOffset,0,j,1,q,r,'L',s,t,'Z'];C[e].setAttribute('d',['M',k,l,'A',F,F,0,j,1,m,n,'L',s,t,'Z'].join(' ')),D[e].setAttribute('d',y.join(' ')),b+=g}}function l(){R+=Q,k(E(R)),1>R?z(arguments.callee):x.afterDrawed.call(this)}var m=this.clientWidth,n=this.clientHeight,o=0;const q=c.map(a=>a.value).reduce((c,a)=>c+a);if(d.legend){var r=document.createElementNS('http://www.w3.org/2000/svg','g');r.classList.add('legend'),c.forEach(function(a){var b=document.createElementNS('http://www.w3.org/2000/svg','g'),c=document.createElementNS('http://www.w3.org/2000/svg','rect');c.setAttribute('width','10'),c.setAttribute('height','10'),b.setAttribute('transform','translate(0,'+(150+(o+=20))+')');var d=document.createElementNS('http://www.w3.org/2000/svg','text'),e=Math.round(100*(a.value/q));d.innerHTML=`${a.title} : ${a.value} (${e}%)`,d.setAttribute('y',11),d.setAttribute('x',20),c.setAttribute('fill',a.color),b.appendChild(c),b.appendChild(d),r.appendChild(b)}),n-=o}var s=m/2,t=n/2,u=Math.cos,v=Math.sin,w=Math.PI,x=a({segmentShowStroke:!0,segmentStrokeColor:'#fff',segmentStrokeWidth:1,baseColor:'#fff',baseOffset:15,edgeOffset:30,pieSegmentGroupClass:'pieSegmentGroup',pieSegmentClass:'pieSegment',lightPiesOffset:12,lightPiesOpacity:.3,lightPieClass:'lightPie',animation:!0,animationSteps:90,animationEasing:'easeInOutExpo',tipOffsetX:0,tipOffsetY:-50,tipClass:'pieTip',beforeDraw:function(){},afterDrawed:function(){},onPieMouseenter:function(){},onPieMouseleave:function(){},onPieClick:function(){},legend:!1},d),z=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),A=b('<svg width="'+m+'" height="'+(n+o)+'" viewBox="0 0 '+m+' '+(n+o)+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>');this.appendChild(A);var B=[],C=[],D=[],E={linear:function(a){return a},easeInOutExpo:function(a){var b=.5>a?8*a*a*a*a:1-8*--a*a*a*a;return 1<b?1:b}}[x.animationEasing],F=function(a){return Math.min.apply(null,a)}([n/2,m/2])-x.edgeOffset,G=0,I=function(){var a=document.createElementNS('http://www.w3.org/2000/svg','circle');A.appendChild(a),a.classList.add('pie'),a.setAttribute('cx',s),a.setAttribute('cy',t),a.setAttribute('r',F+x.baseOffset),a.setAttribute('fill',x.baseColor)}();d.legend&&r.setAttribute('transform','translate(0,'+F+')');var J=document.createElementNS('http://www.w3.org/2000/svg','g');J.setAttribute('opacity',0),A.appendChild(J);var K=document.createElement('div');x.tipClass&&K.classList.add(x.tipClass),K.style.transition='opacity 0.2s',document.body.appendChild(K),K.style.opacity=0;for(var L=K.clientWidth,M=K.clientHeight,N=0,O=c.length;N<O;N++){G+=c[N].value;var P=document.createElementNS('http://www.w3.org/2000/svg','g');'undefined'==typeof P.dataset&&(P.dataset={}),P.dataset.order=N,P.setAttribute('class',x.pieSegmentGroupClass),B[N]=P,J.appendChild(P),B[N].addEventListener('mouseenter',e),B[N].addEventListener('mouseleave',f),B[N].addEventListener('mousemove',h),B[N].addEventListener('click',j);var g=document.createElementNS('http://www.w3.org/2000/svg','path');g.setAttribute('stroke-width',x.segmentStrokeWidth),g.setAttribute('stroke',x.segmentStrokeColor),g.setAttribute('stroke-miterlimit',2),g.setAttribute('fill',c[N].color),g.setAttribute('class',x.pieSegmentClass),C[N]=g,B[N].appendChild(g),d.legend&&A.appendChild(r);var p=document.createElementNS('http://www.w3.org/2000/svg','path');p.setAttribute('stroke-width',x.segmentStrokeWidth),p.setAttribute('stroke',x.segmentStrokeColor),p.setAttribute('stroke-miterlimit',2),p.setAttribute('fill',c[N].color),p.setAttribute('opacity',x.lightPiesOpacity),p.setAttribute('class',x.lightPieClass),p.style.transition='opacity .1s',D[N]=p,B[N].appendChild(p)}x.beforeDraw.call(this),function(){x.animation?z(l):k(1)}();var Q=x.animation?1/x.animationSteps:1,R=x.animation?0:1;return this}})();