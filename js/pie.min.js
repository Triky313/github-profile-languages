!function(){window.drawPieChart=function(t,e){var i=this.clientWidth,a=this.clientHeight,s=0;const n=t.map(t=>t.value).reduce((t,e)=>t+e);if(e.legend){var r=document.createElementNS("http://www.w3.org/2000/svg","g");r.classList.add("legend"),t.forEach(function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("width","10"),i.setAttribute("height","10"),e.setAttribute("transform","translate(0,"+(150+(s+=20))+")");var a=document.createElementNS("http://www.w3.org/2000/svg","text"),o=Math.round(t.value/n*100);a.innerHTML=`${t.title} : ${t.value} (${o}%)`,a.setAttribute("y",11),a.setAttribute("x",20),i.setAttribute("fill",t.color),e.appendChild(i),e.appendChild(a),r.appendChild(e)}),a-=s}var o,l,d=i/2,c=a/2,u=Math.cos,p=Math.sin,h=Math.PI,g=function(){for(let t=1;t<arguments.length;t++)for(let e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]}({segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,baseColor:"#fff",baseOffset:15,edgeOffset:30,pieSegmentGroupClass:"pieSegmentGroup",pieSegmentClass:"pieSegment",lightPiesOffset:12,lightPiesOpacity:.3,lightPieClass:"lightPie",animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",tipOffsetX:0,tipOffsetY:-50,tipClass:"pieTip",beforeDraw:function(){},afterDrawed:function(){},onPieMouseenter:function(t,e){},onPieMouseleave:function(t,e){},onPieClick:function(t,e){},legend:!1},e),f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},m=(o='<svg width="'+i+'" height="'+(a+s)+'" viewBox="0 0 '+i+" "+(a+s)+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>',(l=document.createElement("div")).innerHTML=o,l.childNodes[0]);this.appendChild(m);var w,v,b=[],A=[],y=[],C={linear:function(t){return t},easeInOutExpo:function(t){var e=t<.5?8*t*t*t*t:1-8*--t*t*t*t;return e>1?1:e}}[g.animationEasing],S=(w=[a/2,i/2],Math.min.apply(null,w)-g.edgeOffset),P=0;v=document.createElementNS("http://www.w3.org/2000/svg","circle"),m.appendChild(v),v.classList.add("pie"),v.setAttribute("cx",d),v.setAttribute("cy",c),v.setAttribute("r",S+g.baseOffset),v.setAttribute("fill",g.baseColor);e.legend&&r.setAttribute("transform","translate(0,"+S+")");var O=document.createElementNS("http://www.w3.org/2000/svg","g");O.setAttribute("opacity",0),m.appendChild(O);var E=document.createElement("div");g.tipClass&&E.classList.add(g.tipClass),E.style.transition="opacity 0.2s",document.body.appendChild(E),E.style.opacity=0;E.clientWidth,E.clientHeight;for(var k=0,x=t.length;k<x;k++){P+=t[k].value;var M=document.createElementNS("http://www.w3.org/2000/svg","g");void 0===M.dataset&&(M.dataset={}),M.dataset.order=k,M.setAttribute("class",g.pieSegmentGroupClass),b[k]=M,O.appendChild(M),b[k].addEventListener("mouseenter",W),b[k].addEventListener("mouseleave",q),b[k].addEventListener("mousemove",F),b[k].addEventListener("click",D);var L=document.createElementNS("http://www.w3.org/2000/svg","path");L.setAttribute("stroke-width",g.segmentStrokeWidth),L.setAttribute("stroke",g.segmentStrokeColor),L.setAttribute("stroke-miterlimit",2),L.setAttribute("fill",t[k].color),L.setAttribute("class",g.pieSegmentClass),A[k]=L,b[k].appendChild(L),e.legend&&m.appendChild(r);var N=document.createElementNS("http://www.w3.org/2000/svg","path");N.setAttribute("stroke-width",g.segmentStrokeWidth),N.setAttribute("stroke",g.segmentStrokeColor),N.setAttribute("stroke-miterlimit",2),N.setAttribute("fill",t[k].color),N.setAttribute("opacity",g.lightPiesOpacity),N.setAttribute("class",g.lightPieClass),N.style.transition="opacity .1s",y[k]=N,b[k].appendChild(N)}function W(e){var i=this.dataset.order;E.textContent=t[i].title+": "+t[i].value,E.style.opacity=1,"active"!==b[i].getAttribute("data-active")&&(y[i].style.opacity=.8),g.onPieMouseenter.apply(this,[e,t])}function q(e){var i=this.dataset.order;E.style.opacity=0,"active"!==b[i].getAttribute("data-active")&&(y[i].style.opacity=g.lightPiesOpacity),g.onPieMouseleave.apply(this,[e,t])}function F(t){E.style.top=t.pageY+g.tipOffsetY+"px",E.style.left=t.pageX-E.clientWidth/2+g.tipOffsetX+"px"}function D(e){for(var i=this.dataset.order,a=b[i],s=0,n=t.length;s<n;s++)s!==i&&(b[s].setAttribute("data-active",""),y[s].style.opacity=g.lightPiesOpacity);"active"===a.getAttribute("data-active")?(a.setAttribute("data-active",""),y[i].style.opacity=.8):(a.setAttribute("data-active","active"),y[i].style.opacity=1),g.onPieClick.apply(this,[e,t])}function H(e){var i=-h/2,a=1;g.animation&&(a=e),O.setAttribute("opacity",e);for(var s=0,n=t.length;s<n;s++){var r=a*(t[s].value/P*(2*h)),o=i+r,l=(o-i)%(2*h)>h?1:0,f=d+u(i)*S,m=c+p(i)*S,w=d+u(o)*S,v=c+p(o)*S,b=d+u(i)*(S+g.lightPiesOffset),C=c+p(i)*(S+g.lightPiesOffset),E=d+u(o)*(S+g.lightPiesOffset),k=c+p(o)*(S+g.lightPiesOffset),x=["M",f,m,"A",S,S,0,l,1,w,v,"L",d,c,"Z"],M=["M",b,C,"A",S+g.lightPiesOffset,S+g.lightPiesOffset,0,l,1,E,k,"L",d,c,"Z"];A[s].setAttribute("d",x.join(" ")),y[s].setAttribute("d",M.join(" ")),i+=r}}g.beforeDraw.call(this),g.animation?f(G):H(1);var R=g.animation?1/g.animationSteps:1,T=g.animation?0:1;function G(){H(C(T+=R)),T<1?f(arguments.callee):g.afterDrawed.call(this)}return this}}();